<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Here</title>
  <style>
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#fff;text-align:center}
    .wrap{max-width:520px;margin:0 auto;padding:90px 18px}
    h1{font-size:34px;margin:0 0 26px}
    .btn{
      width:100%;max-width:360px;
      display:inline-block;
      padding:16px 18px;margin:10px 0;
      font-size:20px;border-radius:10px;
      text-decoration:none;border:0;
      cursor:pointer;
    }
    .primary{background:#2AABEE;color:#fff}
    .ghost{background:#111;color:#fff}
    .linkbox{
      margin:16px auto 0;
      max-width:360px;
      padding:12px 14px;
      border:1px solid #e5e5e5;border-radius:10px;
      word-break:break-all;
      font-size:14px;color:#333;
    }
    .tip{margin-top:14px;color:#666;font-size:13px;line-height:1.6}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Here.</h1>

    <!-- 1) 优先唤起TG App -->
    <button class="btn primary" id="openBtn">Telegram</button>

    <!-- 2) 复制链接 -->
    <button class="btn ghost" id="copyBtn">复制链接</button>

    <div class="linkbox" id="rawLink">https://t.me/anmin_88</div>

    <div class="tip">
      若点不开：请先点“复制链接”，再粘贴到系统浏览器打开，或直接粘贴到 Telegram 搜索框。<br/>
      （很多国内安卓的内置浏览器会拦 t.me，属于环境限制）
    </div>
  </div>

<script>
(function(){
  const username = "anmin_88";
  const httpsUrl = "https://t.me/" + username;
  const tgScheme = "tg://resolve?domain=" + username;

  const openBtn = document.getElementById("openBtn");
  const copyBtn = document.getElementById("copyBtn");
  const rawLink = document.getElementById("rawLink");
  rawLink.textContent = httpsUrl;

  function openTelegram(){
    // 先尝试唤起 App
    const start = Date.now();
    window.location.href = tgScheme;

    // 如果没唤起（多数会停留在页面），1秒后退回网页链接
    setTimeout(function(){
      if (Date.now() - start < 1500) {
        window.location.href = httpsUrl;
      }
    }, 900);
  }

  async function copyLink(){
    try{
      await navigator.clipboard.writeText(httpsUrl);
      copyBtn.textContent = "已复制 ✅";
      setTimeout(()=>copyBtn.textContent="复制链接",1200);
    }catch(e){
      // 兼容老浏览器
      const ta = document.createElement("textarea");
      ta.value = httpsUrl;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      document.body.removeChild(ta);
      copyBtn.textContent = "已复制 ✅";
      setTimeout(()=>copyBtn.textContent="复制链接",1200);
    }
  }

  openBtn.addEventListener("click", openTelegram);
  copyBtn.addEventListener("click", copyLink);
})();
</script>
</body>
</html>
